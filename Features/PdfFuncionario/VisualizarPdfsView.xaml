<Page
    x:Class="patrimonioDB.Features.PdfFuncionario.VisualizarPdfsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid Padding="20">
 <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Cabeçalho -->
      <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
  <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

      <!-- Botão Voltar -->
            <Button 
     Grid.Column="0"
    x:Name="VoltarButton"
         Content="Voltar"
     Click="VoltarButton_Click"
            Background="Transparent"
         BorderThickness="0"
                VerticalAlignment="Center"
                Margin="0,0,20,0"/>

       <!-- Título -->
            <TextBlock 
  Grid.Column="1"
                Text="Relatorios PDF Salvos" 
FontSize="28" 
             FontWeight="Bold" 
             VerticalAlignment="Center"/>
        </Grid>

     <StackPanel Grid.Row="1" Spacing="20" MaxWidth="900">

            <!-- Botão Atualizar -->
      <Button 
   x:Name="AtualizarButton"
    Content="Atualizar Lista"
             Click="AtualizarButton_Click"
   HorizontalAlignment="Left"
       Style="{StaticResource AccentButtonStyle}"/>

          <!-- Mensagens -->
            <TextBlock x:Name="MensagemErro"
          Foreground="Red"
    TextWrapping="Wrap"
      Visibility="Collapsed"/>

 <TextBlock x:Name="MensagemSucesso"
             Foreground="Green"
        TextWrapping="Wrap"
  Visibility="Collapsed"/>

   <!-- Loading -->
            <ProgressRing x:Name="LoadingRing"
          IsActive="False"
            Visibility="Collapsed"
    Width="40"
  Height="40"
      HorizontalAlignment="Center"/>

    <!-- Lista de Documentos -->
      <ListView x:Name="DocumentosListView"
      SelectionMode="None"
Height="500">
                <ListView.ItemTemplate>
        <DataTemplate>
  <Border 
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            BorderThickness="1"
       CornerRadius="8"
    Padding="15"
 Margin="0,0,0,10">
        <Grid>
     <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
     </Grid.ColumnDefinitions>

   <!-- Informações do documento -->
        <StackPanel Grid.Column="0" Spacing="5">
  <TextBlock Text="{Binding Nome}" 
           FontWeight="Bold" 
 FontSize="16"/>
   <TextBlock>
  <Run Text="Tamanho: "/>
      <Run Text="{Binding TamanhoFormatado}"/>
     </TextBlock>
       <TextBlock>
   <Run Text="ID: "/>
      <Run Text="{Binding Id}"/>
  </TextBlock>
 </StackPanel>

       <!-- Botões de ação -->
        <StackPanel Grid.Column="1" 
 Spacing="10" 
            VerticalAlignment="Center">
       <Button 
      Content="Baixar"
                Tag="{Binding Id}"
              Click="BaixarButton_Click"
            Width="120"/>
     <Button 
          Content="Visualizar"
        Tag="{Binding Id}"
Click="VisualizarButton_Click"
  Width="120"
          Style="{StaticResource AccentButtonStyle}"/>
   <Button 
       Content="Deletar"
   Tag="{Binding Id}"
       Click="DeletarButton_Click"
       Width="120"
          Background="Red"
             Foreground="White"/>
   </StackPanel>
         </Grid>
  </Border>
                    </DataTemplate>
  </ListView.ItemTemplate>
 </ListView>

          <!-- Info -->
       <TextBlock TextWrapping="Wrap" 
          Foreground="Gray" 
FontSize="12">
                <Run Text="Os PDFs são salvos no banco de dados."/>
    <LineBreak/>
                <Run Text="Clique em 'Baixar' para salvar uma cópia na pasta Downloads."/>
         </TextBlock>

     </StackPanel>
    </Grid>
</Page>
